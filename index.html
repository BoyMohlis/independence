<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kuis Kemerdekaan ‚Äì Naikkan Bendera (Fix)</title>
  <style>
    :root{ --max-flag-raise:86; }
    *{box-sizing:border-box}
    body{ margin:0; font-family:system-ui, Arial, sans-serif; background:#f6f7fb; color:#111; }
    header{ text-align:center; padding:14px 12px }
    h1{ margin:4px 0; font-size:clamp(18px,3.2vw,26px) }


    .wrapper {
      display: flex;
      transition: transform 0.3s ease;
    }

    /* Sidebar */
    .sidebar {
      width: 250px;
      height: 100vh;
      background-color: #333;
      color: white;
      padding: 1em;
      position: fixed;
      top: 0;
      left: -280px;
      z-index: 1000;
      transition: left 0.3s ease;
      text-align: left;
    }

    .sidebar.open {
      left: 0;
    }

    .sidebar h2 {
      color: #fff;
    }

    .sidebar a {
      display: block;
      color: #ccc;
      padding: 10px 0;
      text-decoration: none;
    }

    .sidebar a:hover {
      color: #fff;
    }

    /* Overlay (untuk HP) */
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.3);
      z-index: 999;
      display: none;
    }

    .overlay.active {
      display: block;
    }

    .menu-btn {
      position: fixed;
      top: 1rem;
      left: 1rem;
      font-size: 24px;
      cursor: pointer;
      z-index: 1100;
      background: #fff;
      padding: 5px 10px;
      border-radius: 5px;
    }

    .game{ display:flex; flex-direction:column; gap:12px; align-items:stretch; height:calc(100vh - 86px); }

    /* STAGE */
    .stage{ flex:1; display:flex; justify-content:center; align-items:flex-end; padding:12px; }
    .pole-wrap{ position:relative; width:240px; max-width:85vw; height:86%; }

    /* container that holds numbers, stick, and flag. keep relative */
    .pole{ position:relative; width:100%; height:100%; margin:0 auto; }
    .pole-stick{ position:absolute; left:52px; top:0; width:8px; height:100%; background:#333; border-radius:6px; }

    /* numbers on left of the stick. column-reverse so appended 1..n shows bottom-to-top */
    .numbers{ position:absolute; left:0; top:8px; bottom:8px; width:48px; display:flex; flex-direction:column-reverse; justify-content:space-between; align-items:center; font-weight:700; color:#222; }
    .numbers div{ font-size:14px; }

    /* flag positioned to the right of the stick, inside the pole so bottom percent is relative to pole */
    .flag{ position:absolute; left:72px; bottom:0; width:90px; height:auto; transition: bottom .6s cubic-bezier(.2,.8,.2,1); will-change:bottom, transform; }

    /* QUIZ panel at bottom */
    .quiz{ background:#fff; border-top-left-radius:14px; border-top-right-radius:14px; padding:12px; box-shadow:0 -8px 30px rgba(16,24,40,.06); }
    .question{ text-align:center; font-size:1.05rem; margin-bottom:8px }
    .options{ display:flex; flex-direction:column; gap:8px; }
    .opts button{ padding:12px 14px; border-radius:10px; border:1px solid #e6eefc; background:#0f1724; color:#fff; font-weight:600; cursor:pointer }
    .opts button.wrong{ background:#fee2e2; color:#7f1d1d; border-color:#fecaca }
    .opts button.right{ background:#dcfce7; color:#14532d; border-color:#bbf7d0 }

    .footer-row{ display:flex; gap:12px; align-items:center; justify-content:center; margin-top:10px }
    .btn{ padding:10px 16px; border-radius:10px; border:none; cursor:pointer; font-weight:700 }
    .btn.primary{ background:#059669; color:#fff }
    .btn.secondary{ background:#1f2937; color:#fff }

    .result-msg{ text-align:center; margin-top:6px; font-weight:700 }

    /* responsive */
    @media (max-width:600px){
      .pole-wrap{ width:200px }
      .flag{ width:68px; left:64px }
      .numbers div{ font-size:13px }
      .opts button{ font-size:15px; padding:10px }
    }
  </style>
</head>
<body>
  <div class="menu-btn" onclick="toggleSidebar()">‚ò∞</div>

  <div class="sidebar" id="sidebar">
    <br><h2>Menu</h2>
    <a href="index.html">Beranda</a>
    <a href="https://ra-adirasa.blogspot.com/">R.A. Adirasa</a>
    <a href="help.html">Cara Pakai</a>
    <a href="about.html">Tentang Aplikasi</a>
  </div>

  <div class="overlay" id="overlay" onclick="toggleSidebar()"></div>

  <header>
    <h1>üéå Kuis Kemerdekaan ‚Äì Naikkan Bendera</h1>
    <div class="sub">Jawab soal. Setiap jawaban <b>benar</b> menaikkan bendera setahap. (1 di bawah ‚Üí naik ke atas)</div>
  </header>

  <main class="game">
    <section class="stage">
      <div class="pole-wrap">
        <div class="pole" id="pole">
          <div class="numbers" id="numbers"></div>
          <div class="pole-stick"></div>
          <!-- flag berada di dalam .pole supaya posisi bottom (%) relatif terhadap tinggi pole -->
          <img id="flag" class="flag" src="flag.gif" alt="bendera">
        </div>
      </div>
    </section>

    <section class="quiz">
      <div class="question" id="question">Memuat soal...</div>
      <div class="options opts" id="options"></div>
      <div class="result-msg" id="result"></div>

      <div class="footer-row">
        <button class="btn secondary" id="btnReset">‚Üª Mulai Ulang</button>
        <button class="btn primary" id="btnPlay" style="display:none">‚ñ∂Ô∏è Putar Lagu Kemerdekaan</button>
      </div>
    </section>
  </main>

  <audio id="lagu"><source src="lagu.mp3" type="audio/mpeg"></audio>

  <script>
    // contoh soal
    const questions = [
      { q: "Tanggal Proklamasi Kemerdekaan Indonesia adalah?", a:["17 Agustus 1945","20 Mei 1908","28 Oktober 1928"], k:0 },
      { q: "Siapa yang menjahit bendera Merah Putih?", a:["Fatmawati","Kartini","Cut Nyak Dien"], k:0 },
      { q: "Siapa wakil proklamator RI?", a:["Moh. Hatta","Sutan Sjahrir","Soepomo"], k:0 },
      { q: "Lagu kebangsaan Indonesia adalah?", a:["Indonesia Raya","Garuda Pancasila","Hari Merdeka"], k:0 },
      { q: "Ibu kota Indonesia?", a:["Jakarta","Bandung","Surabaya"], k:0 }
    ];

    const total = questions.length;
    let idx = 0, benar = 0, skor = 0;

    const numbersBox = document.getElementById('numbers');
    const flag = document.getElementById('flag');
    const questionEl = document.getElementById('question');
    const optionsEl = document.getElementById('options');
    const resultEl = document.getElementById('result');
    const btnPlay = document.getElementById('btnPlay');
    const lagu = document.getElementById('lagu');
    const btnReset = document.getElementById('btnReset');

    // buat angka di tiang (1..N) ‚Äî kita append 1..N, dan CSS .numbers pake column-reverse
    function buildNumbers(){
      numbersBox.innerHTML = '';
      for(let i=1;i<=total;i++){
        const d = document.createElement('div');
        d.textContent = i;
        numbersBox.appendChild(d);
      }
    }

    function setFlagByCorrect(){
      // gunakan persen relatif terhadap tinggi pole. gunakan --max-flag-raise untuk batas atas (mencegah overflow)
      const pct = (benar / total) * parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--max-flag-raise'));
      flag.style.bottom = pct + '%';
    }

    function showQuestion(){
      if(idx >= total){
        questionEl.textContent = 'üéâ Selamat! Bendera sudah di puncak!';
        optionsEl.innerHTML = '';
        resultEl.textContent = `Skor: ${benar}/${total}`;
        // tampilkan tombol play lagu (manual play lebih reliable di mobile)
        if(benar === total){
          btnPlay.style.display = 'inline-block';
        } else {
          btnPlay.style.display = 'inline-block';
        }
        return;
      }

      const s = questions[idx];
      questionEl.textContent = s.q;
      optionsEl.innerHTML = '';
      resultEl.textContent = '';
      s.a.forEach((opt,i)=>{
        const b = document.createElement('button');
        b.textContent = opt;
        b.onclick = ()=> handleAnswer(i,b);
        optionsEl.appendChild(b);
      });
    }

    function handleAnswer(i, btn){
      // disable all buttons
      Array.from(optionsEl.children).forEach(x=> x.disabled = true);

      const correct = questions[idx].k;
      if(i === correct){
        btn.classList.add('right');
        benar++; skor += 10;
        resultEl.textContent = '‚úÖ Benar! Bendera naik.';
        setFlagByCorrect();
      } else {
        btn.classList.add('wrong');
        // tunjukkan kunci
        const rightBtn = optionsEl.children[correct];
        if(rightBtn) rightBtn.classList.add('right');
        resultEl.textContent = '‚ùå Salah. Bendera tetap.';
      }

      idx++;
      // auto lanjut setelah jeda singkat
      setTimeout(showQuestion, 700);
    }

    btnPlay.addEventListener('click', ()=>{
      lagu.play().catch(()=>{
        // autoplay blocked ‚Äî biarkan user tekan lagi
      });
    });
    btnReset.addEventListener('click', ()=>{
      idx = 0; benar = 0; skor = 0; flag.style.bottom = '0%'; buildNumbers(); showQuestion(); btnPlay.style.display='none'; resultEl.textContent='';
    });

    // init
    buildNumbers();
    showQuestion();
    // pastikan flag start di bawah
    flag.style.bottom = '0%';
  </script>

<!-- menu -->
  <script>
    function toggleSidebar() {
      const sidebar = document.getElementById("sidebar");
      const overlay = document.getElementById("overlay");

      sidebar.classList.toggle("open");
      overlay.classList.toggle("active");
    }

  </script>  
</body>
</html>
