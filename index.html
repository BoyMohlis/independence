<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kuis Kemerdekaan ‚Äì Naikkan Bendera</title>
  <style>
    :root{ --max-flag-raise:86; }
    *{box-sizing:border-box}
    body{ margin:0; font-family:system-ui, Arial, sans-serif; background:#f6f7fb; color:#111; }
    header{ text-align:center; padding:14px 12px }
    h1{ margin:4px 0; font-size:clamp(18px,3.2vw,26px) }

    .wrapper { display: flex; transition: transform 0.3s ease; }
    .sidebar { width: 250px; height: 100vh; background-color: #333; color: white; padding: 1em; position: fixed; top: 0; left: -280px; z-index: 1000; transition: left 0.3s ease; text-align: left; }
    .sidebar.open { left: 0; }
    .sidebar h2 { color: #fff; }
    .sidebar a { display: block; color: #ccc; padding: 10px 0; text-decoration: none; }
    .sidebar a:hover { color: #fff; }
    .overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0, 0, 0, 0.3); z-index: 999; display: none; }
    .overlay.active { display: block; }
    .menu-btn { position: fixed; top: 1rem; left: 1rem; font-size: 24px; cursor: pointer; z-index: 1100; background: #fff; padding: 5px 10px; border-radius: 5px; }

    .game{ display:flex; flex-direction:column; gap:12px; align-items:stretch; height:calc(100vh - 86px); }
    .stage{ flex:1; display:flex; justify-content:center; align-items:flex-end; padding:12px; }
    .pole-wrap{ position:relative; width:240px; max-width:85vw; height:86%; }
    .pole{ position:relative; width:100%; height:100%; margin:0 auto; }
    .pole-stick{ position:absolute; left:52px; top:0; width:8px; height:100%; background:#333; border-radius:6px; }
    .numbers{ position:absolute; left:0; top:8px; bottom:8px; width:48px; display:flex; flex-direction:column-reverse; justify-content:space-between; align-items:center; font-weight:700; color:#222; }
    .numbers div{ font-size:14px; }
    .flag{ position:absolute; left:72px; bottom:0; width:90px; height:auto; transition: bottom .6s cubic-bezier(.2,.8,.2,1); will-change:bottom, transform; }

    .quiz{ background:#fff; border-top-left-radius:14px; border-top-right-radius:14px; padding:12px; box-shadow:0 -8px 30px rgba(16,24,40,.06); }
    .question{ text-align:center; font-size:1.05rem; margin-bottom:8px }
    .options{ display:flex; flex-direction:column; gap:8px; }
    .opts button{ padding:12px 14px; border-radius:10px; border:1px solid #e6eefc; background:#0f1724; color:#fff; font-weight:600; cursor:pointer }
    .opts button.wrong{ background:#fee2e2; color:#7f1d1d; border-color:#fecaca }
    .opts button.right{ background:#dcfce7; color:#14532d; border-color:#bbf7d0 }

    .footer-row{ display:flex; gap:12px; align-items:center; justify-content:center; margin-top:10px }
    .btn{ padding:10px 16px; border-radius:10px; border:none; cursor:pointer; font-weight:700 }
    .btn.primary{ background:#059669; color:#fff }
    .btn.secondary{ background:#1f2937; color:#fff }
    .result-msg{ text-align:center; margin-top:6px; font-weight:700 }

    @media (max-width:600px){
      .pole-wrap{ width:200px }
      .flag{ width:68px; left:64px }
      .numbers div{ font-size:13px }
      .opts button{ font-size:15px; padding:10px }
    }
  </style>
</head>
<body>
  <div class="menu-btn" onclick="toggleSidebar()">‚ò∞</div>

  <div class="sidebar" id="sidebar">
    <br><h2>Menu</h2>
    <a href="index.html">Beranda</a>
    <a href="https://ra-adirasa.blogspot.com/">R.A. Adirasa</a>
    <a href="help.html">Cara Pakai</a>
    <a href="about.html">Tentang Aplikasi</a>
  </div>

  <div class="overlay" id="overlay" onclick="toggleSidebar()"></div>

  <header>
    <h1>üéå Kuis Kemerdekaan ‚Äì Naikkan Bendera</h1>
    <div class="sub">Jawab soal. Setiap jawaban <b>benar</b> menaikkan bendera setahap.</div>
  </header>

  <main class="game">
    <section class="stage">
      <div class="pole-wrap">
        <div class="pole" id="pole">
          <div class="numbers" id="numbers"></div>
          <div class="pole-stick"></div>
          <img id="flag" class="flag" src="flag.gif" alt="bendera">
        </div>
      </div>
    </section>

    <section class="quiz">
      <div class="question" id="question">Memuat soal...</div>
      <div class="options opts" id="options"></div>
      <div class="result-msg" id="result"></div>
      <div class="footer-row">
        <button class="btn secondary" id="btnReset">‚Üª Mulai Ulang</button>
        <button class="btn primary" id="btnPlay" style="display:none">‚ñ∂Ô∏è Putar Lagu Kemerdekaan</button>
      </div>
    </section>
  </main>

  <audio id="lagu"><source src="lagu.mp3" type="audio/mpeg"></audio>

  <script>
    // semua soal (boleh 10 atau lebih)
    const allQuestions = [
      { q: "Tanggal Proklamasi Kemerdekaan Indonesia adalah?", a:["17 Agustus 1945","20 Mei 1908","28 Oktober 1928"], k:0 },
      { q: "Siapa yang menjahit bendera Merah Putih?", a:["Fatmawati","Kartini","Cut Nyak Dien"], k:0 },
      { q: "Siapa wakil proklamator RI?", a:["Moh. Hatta","Sutan Sjahrir","Soepomo"], k:0 },
      { q: "Lagu kebangsaan Indonesia adalah?", a:["Indonesia Raya","Garuda Pancasila","Hari Merdeka"], k:0 },
      { q: "Ibu kota Indonesia?", a:["Jakarta","Bandung","Surabaya"], k:0 },
      { q: "Tanggal lahir Pancasila diperingati setiap?", a:["1 Juni","17 Agustus","20 Mei"], k:0 },
      { q: "Siapa presiden pertama RI?", a:["Soekarno","Soeharto","Habibie"], k:0 },
      { q: "BPUPKI dibentuk pada tahun?", a:["1945","1944","1942"], k:1 },
      { q: "Pembacaan Proklamasi dilakukan di jalan?", a:["Pegangsaan Timur 56","Merdeka Barat","Diponegoro 21"], k:0 },
      { q: "Siapa penulis teks proklamasi?", a:["Soekarno","Sutan Sjahrir","Soekarni"], k:0 }
    ];

    const QUIZ_COUNT = 5; // jumlah soal yang dimainkan

    function getRandomQuestions(source, n) {
      const copy = [...source];
      for (let i = copy.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [copy[i], copy[j]] = [copy[j], copy[i]];
      }
      return copy.slice(0, n);
    }

    let questions = getRandomQuestions(allQuestions, QUIZ_COUNT);
    let total = questions.length;
    let idx = 0, benar = 0, skor = 0;

    const numbersBox = document.getElementById('numbers');
    const flag = document.getElementById('flag');
    const questionEl = document.getElementById('question');
    const optionsEl = document.getElementById('options');
    const resultEl = document.getElementById('result');
    const btnPlay = document.getElementById('btnPlay');
    const lagu = document.getElementById('lagu');
    const btnReset = document.getElementById('btnReset');

    function buildNumbers(){
      numbersBox.innerHTML = '';
      for(let i=1;i<=total;i++){
        const d = document.createElement('div');
        d.textContent = i;
        numbersBox.appendChild(d);
      }
    }

    function setFlagByCorrect(){
      const pct = (benar / total) * parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--max-flag-raise'));
      flag.style.bottom = pct + '%';
    }

    function showQuestion(){
      if(idx >= total){
        questionEl.textContent = 'üéâ Selamat! Bendera sudah di puncak!';
        optionsEl.innerHTML = '';
        resultEl.textContent = `Skor: ${benar}/${total}`;
        btnPlay.style.display = 'inline-block';
        return;
      }

      const s = questions[idx];
      // acak opsi + tandai mana yang benar
      let options = s.a.map((text, i) => ({ text, isCorrect: i === s.k }));
      for (let i = options.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [options[i], options[j]] = [options[j], options[i]];
      }

      questionEl.textContent = s.q;
      optionsEl.innerHTML = '';
      resultEl.textContent = '';
      options.forEach((opt) => {
        const b = document.createElement('button');
        b.textContent = opt.text;
        b.onclick = () => handleAnswer(opt.isCorrect, b, optionsEl);
        optionsEl.appendChild(b);
      });
    }

    function handleAnswer(isCorrect, btn, container){
      Array.from(container.children).forEach(x=> x.disabled = true);

      if(isCorrect){
        btn.classList.add('right');
        benar++; skor += 10;
        resultEl.textContent = '‚úÖ Benar! Bendera naik.';
        setFlagByCorrect();
      } else {
        btn.classList.add('wrong');
        const rightBtn = Array.from(container.children).find(b => b.onclick.toString().includes("true"));
        if(rightBtn) rightBtn.classList.add('right');
        resultEl.textContent = '‚ùå Salah. Bendera tetap.';
      }

      idx++;
      setTimeout(showQuestion, 700);
    }

    btnPlay.addEventListener('click', ()=>{ lagu.play(); });
    btnReset.addEventListener('click', ()=>{
      questions = getRandomQuestions(allQuestions, QUIZ_COUNT);
      total = questions.length;
      idx = 0; benar = 0; skor = 0;
      flag.style.bottom = '0%';
      buildNumbers(); showQuestion();
      btnPlay.style.display='none'; resultEl.textContent='';
    });

    buildNumbers();
    showQuestion();
    flag.style.bottom = '0%';
  </script>

  <script>
    function toggleSidebar() {
      const sidebar = document.getElementById("sidebar");
      const overlay = document.getElementById("overlay");
      sidebar.classList.toggle("open");
      overlay.classList.toggle("active");
    }
  </script>
</body>
</html>
